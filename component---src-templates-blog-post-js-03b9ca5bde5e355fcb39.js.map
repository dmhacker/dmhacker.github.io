{"version":3,"sources":["webpack:///./node_modules/react-remarkbox/dist/index.js","webpack:///./node_modules/iframe-resizer/js/iframeResizer.js","webpack:///./node_modules/iframe-resizer/js/iframeResizer.contentWindow.js","webpack:///./node_modules/iframe-resizer/index.js","webpack:///./node_modules/core-js/modules/es6.number.constructor.js","webpack:///./src/templates/blog-post.js","webpack:///./node_modules/iframe-resizer/js/index.js"],"names":["Object","defineProperty","exports","value","obj","_iframeResizer","_propTypes","__esModule","_react","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","_interopRequireWildcard","_typeof","Symbol","iterator","constructor","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","p","_defineProperty","getRemarkboxUrl","remarkboxKey","threadUri","threadTitle","concat","encodeURIComponent","Remarkbox","_Component","_getPrototypeOf2","_this","instance","Constructor","TypeError","_classCallCheck","this","_len","arguments","args","Array","_key","apply","iframe","protoProps","staticProps","subClass","superClass","create","_inherits","threadFragment","iframeResizer","checkOrigin","inPageLinks","initCallback","event","iFrameResizer","moveToAnchor","_this$props","className","style","createElement","frameBorder","ref","onRef","scrolling","src","tabIndex","title","Component","string","isRequired","object","_default","undefined","window","$","count","logEnabled","hiddenCheckEnabled","msgHeaderLen","msgId","msgIdLen","pagePosition","requestAnimationFrame","resetRequiredMethods","max","scroll","bodyScroll","documentElementScroll","settings","timer","defaults","autoResize","bodyBackground","bodyMargin","bodyMarginV1","bodyPadding","enablePublicMethods","heightCalculationMethod","id","interval","log","maxHeight","Infinity","maxWidth","minHeight","minWidth","resizeFrom","sizeHeight","sizeWidth","warningTimeout","tolerance","widthCalculationMethod","closedCallback","messageCallback","warn","resizedCallback","scrollCallback","frameTimer","jQuery","fn","iFrameResize","options","filter","each","index","element","setupIFrame","end","info","factory","getMutationObserver","MutationObserver","WebKitMutationObserver","MozMutationObserver","addEventListener","evt","func","attachEvent","removeEventListener","el","detachEvent","formatLogHeader","iframeId","retStr","top","parentIFrame","getId","getMyID","isLogEnabled","msg","output","type","enabled","console","iFrameListener","resizeIFrame","ensureInRange","syncResize","setSize","messageData","setPagePosition","callback","Dimension","Number","min","dimension","toLowerCase","size","getMsgBody","offset","substr","indexOf","sendPageInfoToIframe","time","frameId","bodyPosition","iFramePosition","trigger","document","body","getBoundingClientRect","JSON","stringify","iframeHeight","height","iframeWidth","width","clientHeight","Math","documentElement","innerHeight","clientWidth","innerWidth","offsetTop","parseInt","offsetLeft","left","scrollTop","pageYOffset","scrollLeft","pageXOffset","setTimeout","getElementPosition","getPagePosition","x","floor","y","scrollRequestFromChild","addOffset","newPosition","scrollTo","unsetPagePosition","funcName","val","chkCallback","retBool","retCode","data","createOutgoingMsg","getElementById","iFrameReadyMsgReceived","split","loaded","hasSettings","remoteHost","origin","checkList","Error","isMessageFromIFrame","firstRun","closeRequestCallback","closeIFrame","msgBody","message","parse","setListener","sendPageInfo","stop","forEach","stopPageInfo","startPageInfoMonitor","location","jumpPosition","hash","hashData","decodeURIComponent","getElementsByName","findTarget","resetIFrame","actionMsg","retVal","removeIframeListeners","parentNode","removeChild","e","chkZero","checkIFrames","checkIFrame","settingId","chkDimension","offsetParent","mutationObserved","mutations","debouce","querySelector","observe","attributes","attributeOldValue","characterData","characterDataOldValue","childList","subtree","fixHiddenIFrames","processDimension","setDimension","doNotSync","calleeMsg","noResponseWarning","errorShown","contentWindow","targetOrigin","postMessage","msgTimeout","ensureHasId","slice","join","checkOptions","option","copyOptions","processOptions","overflow","setScrolling","addStyle","chkMinMax","setLimits","mutation","removedNodes","removedNode","createDestroyObserver","resetRequertMethod","Function","bind","close","removeListeners","resize","anchor","sendMessage","resizeIFrames","sendTriggerMsg","tabVisible","visibilityState","eventName","isIFrameResizeEnabled","init","tagName","toUpperCase","chkType","iFrames","push","vendors","setupRequestAnimationFrame","warnDeprecatedOptions","querySelectorAll","base","bodyMarginStr","bodyObserver","calculateWidth","doubleEventList","click","eventCancelTimer","heightCalcModeDefault","heightCalcMode","initLock","initMsg","intervalTimer","logging","msgID","myID","sendPermit","parent","targetOriginDefault","triggerLocked","triggerLockedTimer","throttledTimer","widthCalcModeDefault","widthCalcMode","win","readyCallback","pageInfoCallback","customCalcMethods","offsetHeight","scrollWidth","eventHandlersByName","passiveSupported","passive","once","noop","context","result","timeout","previous","later","getNow","Date","now","getTime","getHeight","bodyOffset","getComputedStyle","scrollHeight","custom","documentElementOffset","getAllMeasurements","grow","lowestElement","getMaxElement","getAllElements","taggedElement","getTaggedElements","getWidth","offsetWidth","rightMostElement","sizeIFrameThrottled","sizeIFrame","remaining","clearTimeout","receiver","chkLateLoaded","capitalizeFirstLetter","charAt","formatLogMsg","clearFix","strBool","str","enable","readDataFromParent","href","setupCustomCalcMethods","calcMode","calcFunc","readDataFromPage","setBodyStyle","attr","chkCSS","setMargin","clear","display","appendChild","checkHeightMode","checkWidthMode","startEventListeners","stopEventListeners","sendMsg","getPageInfo","reset","scrollToOffset","setHeightCalculationMethod","setWidthCalculationMethod","setTargetOrigin","customHeight","customWidth","sendSize","elPosition","jumpToTarget","checkLocationHash","getAttribute","preventDefault","setupInPageLinks","manageTriggerEvent","listener","add","handleEvent","eventType","remove","eventNames","map","method","manageEventListeners","checkCalcMode","calcModeDefault","modes","forceIntervalTimer","initInterval","addImageLoadListners","addImageLoadListener","complete","imageLoaded","imageError","elements","attributeName","removeImageLoadListener","splice","removeFromArray","imageEventTriggered","typeDesc","observer","createMutationObserver","disconnect","setupBodyMutationObserver","clearInterval","setInterval","abs","prop","defaultView","test","runtimeStyle","currentStyle","pixelLeft","convertUnitsToPxForIE8","side","elementsLength","elVal","maxVal","Side","chkEventThottle","dimention","tag","triggerEvent","triggerEventDesc","currentHeight","currentWidth","checkTolarance","a","b","isSizeChangeDetected","lockTrigger","resetPage","triggerReset","hcm","processRequestFromParent","source","getData","inPageLink","pageInfo","getMessageType","isInitMsg","callFromParent","messageType","module","readyState","global","has","cof","inheritIfRequired","toPrimitive","fails","gOPN","f","gOPD","dP","$trim","trim","$Number","Base","proto","BROKEN_COF","TRIM","String","toNumber","argument","it","third","radix","maxCode","first","charCodeAt","NaN","code","digits","l","that","valueOf","keys","j","BlogPostTemplate","render","post","markdownRemark","slug","path","frontmatter","description","excerpt","to","date","dangerouslySetInnerHTML","__html","html","React","pageQuery","iframeResizerContentWindow"],"mappings":"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","file":"component---src-templates-blog-post-js-03b9ca5bde5e355fcb39.js","sourcesContent":["\"use strict\";\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _iframeResizer = require(\"iframe-resizer\");\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj[\"default\"] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction getRemarkboxUrl(remarkboxKey, threadUri, threadTitle) {\n  return \"https://my.remarkbox.com/embed?rb_owner_key=\".concat(remarkboxKey, \"&thread_title=\").concat(encodeURIComponent(threadTitle), \"&thread_uri=\").concat(encodeURIComponent(threadUri));\n}\n\nvar Remarkbox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Remarkbox, _Component);\n\n  function Remarkbox() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Remarkbox);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Remarkbox)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"iframe\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"onRef\", function (iframe) {\n      _this.iframe = iframe;\n    });\n\n    return _this;\n  }\n\n  _createClass(Remarkbox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (!this.iframe) {\n        return;\n      }\n\n      var threadFragment = this.props.threadFragment;\n      (0, _iframeResizer.iframeResizer)({\n        checkOrigin: ['https://my.remarkbox.com'],\n        inPageLinks: true,\n        initCallback: function initCallback(event) {\n          if (threadFragment) {\n            event.iFrameResizer.moveToAnchor(threadFragment);\n          }\n        }\n      }, this.iframe);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          className = _this$props.className,\n          remarkboxKey = _this$props.remarkboxKey,\n          style = _this$props.style,\n          threadTitle = _this$props.threadTitle,\n          threadUri = _this$props.threadUri;\n      return _react[\"default\"].createElement(\"iframe\", {\n        className: className,\n        frameBorder: 0,\n        ref: this.onRef,\n        scrolling: 'no',\n        src: getRemarkboxUrl(remarkboxKey, threadUri, threadTitle),\n        style: style,\n        tabIndex: 0,\n        title: 'Remarkbox'\n      });\n    }\n  }]);\n\n  return Remarkbox;\n}(_react.Component);\n\n_defineProperty(Remarkbox, \"propTypes\", {\n  className: _propTypes[\"default\"].string,\n  remarkboxKey: _propTypes[\"default\"].string.isRequired,\n  style: _propTypes[\"default\"].object,\n  threadFragment: _propTypes[\"default\"].string,\n  threadTitle: _propTypes[\"default\"].string.isRequired,\n  threadUri: _propTypes[\"default\"].string.isRequired\n});\n\nvar _default = Remarkbox;\nexports[\"default\"] = _default;","require(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\n/*\n * File: iframeResizer.js\n * Desc: Force iframes to size to content.\n * Requires: iframeResizer.contentWindow.js to be loaded into the target frame.\n * Doc: https://github.com/davidjbradshaw/iframe-resizer\n * Author: David J. Bradshaw - dave@bradshaw.net\n * Contributor: Jure Mav - jure.mav@gmail.com\n * Contributor: Reed Dadoune - reed@dadoune.com\n */\n(function (undefined) {\n  'use strict';\n\n  if (typeof window === 'undefined') return; // don't run for server side render\n\n  var count = 0,\n      logEnabled = false,\n      hiddenCheckEnabled = false,\n      msgHeader = 'message',\n      msgHeaderLen = msgHeader.length,\n      msgId = '[iFrameSizer]',\n      //Must match iframe msg ID\n  msgIdLen = msgId.length,\n      pagePosition = null,\n      requestAnimationFrame = window.requestAnimationFrame,\n      resetRequiredMethods = {\n    max: 1,\n    scroll: 1,\n    bodyScroll: 1,\n    documentElementScroll: 1\n  },\n      settings = {},\n      timer = null,\n      logId = 'Host Page',\n      defaults = {\n    autoResize: true,\n    bodyBackground: null,\n    bodyMargin: null,\n    bodyMarginV1: 8,\n    bodyPadding: null,\n    checkOrigin: true,\n    inPageLinks: false,\n    enablePublicMethods: true,\n    heightCalculationMethod: 'bodyOffset',\n    id: 'iFrameResizer',\n    interval: 32,\n    log: false,\n    maxHeight: Infinity,\n    maxWidth: Infinity,\n    minHeight: 0,\n    minWidth: 0,\n    resizeFrom: 'parent',\n    scrolling: false,\n    sizeHeight: true,\n    sizeWidth: false,\n    warningTimeout: 5000,\n    tolerance: 0,\n    widthCalculationMethod: 'scroll',\n    closedCallback: function closedCallback() {},\n    initCallback: function initCallback() {},\n    messageCallback: function messageCallback() {\n      warn('MessageCallback function not defined');\n    },\n    resizedCallback: function resizedCallback() {},\n    scrollCallback: function scrollCallback() {\n      return true;\n    }\n  };\n\n  function getMutationObserver() {\n    return window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;\n  }\n\n  function addEventListener(obj, evt, func) {\n    /* istanbul ignore else */\n    // Not testable in PhantonJS\n    if ('addEventListener' in window) {\n      obj.addEventListener(evt, func, false);\n    } else if ('attachEvent' in window) {\n      //IE\n      obj.attachEvent('on' + evt, func);\n    }\n  }\n\n  function removeEventListener(el, evt, func) {\n    /* istanbul ignore else */\n    // Not testable in phantonJS\n    if ('removeEventListener' in window) {\n      el.removeEventListener(evt, func, false);\n    } else if ('detachEvent' in window) {\n      //IE\n      el.detachEvent('on' + evt, func);\n    }\n  }\n\n  function setupRequestAnimationFrame() {\n    var vendors = ['moz', 'webkit', 'o', 'ms'],\n        x; // Remove vendor prefixing if prefixed and break early if not\n\n    for (x = 0; x < vendors.length && !requestAnimationFrame; x += 1) {\n      requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n    }\n\n    if (!requestAnimationFrame) {\n      log('setup', 'RequestAnimationFrame not supported');\n    }\n  }\n\n  function getMyID(iframeId) {\n    var retStr = 'Host page: ' + iframeId;\n\n    if (window.top !== window.self) {\n      if (window.parentIFrame && window.parentIFrame.getId) {\n        retStr = window.parentIFrame.getId() + ': ' + iframeId;\n      } else {\n        retStr = 'Nested host page: ' + iframeId;\n      }\n    }\n\n    return retStr;\n  }\n\n  function formatLogHeader(iframeId) {\n    return msgId + '[' + getMyID(iframeId) + ']';\n  }\n\n  function isLogEnabled(iframeId) {\n    return settings[iframeId] ? settings[iframeId].log : logEnabled;\n  }\n\n  function log(iframeId, msg) {\n    output('log', iframeId, msg, isLogEnabled(iframeId));\n  }\n\n  function info(iframeId, msg) {\n    output('info', iframeId, msg, isLogEnabled(iframeId));\n  }\n\n  function warn(iframeId, msg) {\n    output('warn', iframeId, msg, true);\n  }\n\n  function output(type, iframeId, msg, enabled) {\n    if (true === enabled && 'object' === typeof window.console) {\n      console[type](formatLogHeader(iframeId), msg);\n    }\n  }\n\n  function iFrameListener(event) {\n    function resizeIFrame() {\n      function resize() {\n        setSize(messageData);\n        setPagePosition(iframeId);\n        callback('resizedCallback', messageData);\n      }\n\n      ensureInRange('Height');\n      ensureInRange('Width');\n      syncResize(resize, messageData, 'init');\n    }\n\n    function processMsg() {\n      var data = msg.substr(msgIdLen).split(':');\n      return {\n        iframe: settings[data[0]] && settings[data[0]].iframe,\n        id: data[0],\n        height: data[1],\n        width: data[2],\n        type: data[3]\n      };\n    }\n\n    function ensureInRange(Dimension) {\n      var max = Number(settings[iframeId]['max' + Dimension]),\n          min = Number(settings[iframeId]['min' + Dimension]),\n          dimension = Dimension.toLowerCase(),\n          size = Number(messageData[dimension]);\n      log(iframeId, 'Checking ' + dimension + ' is in range ' + min + '-' + max);\n\n      if (size < min) {\n        size = min;\n        log(iframeId, 'Set ' + dimension + ' to min value');\n      }\n\n      if (size > max) {\n        size = max;\n        log(iframeId, 'Set ' + dimension + ' to max value');\n      }\n\n      messageData[dimension] = '' + size;\n    }\n\n    function isMessageFromIFrame() {\n      function checkAllowedOrigin() {\n        function checkList() {\n          var i = 0,\n              retCode = false;\n          log(iframeId, 'Checking connection is from allowed list of origins: ' + checkOrigin);\n\n          for (; i < checkOrigin.length; i++) {\n            if (checkOrigin[i] === origin) {\n              retCode = true;\n              break;\n            }\n          }\n\n          return retCode;\n        }\n\n        function checkSingle() {\n          var remoteHost = settings[iframeId] && settings[iframeId].remoteHost;\n          log(iframeId, 'Checking connection is from: ' + remoteHost);\n          return origin === remoteHost;\n        }\n\n        return checkOrigin.constructor === Array ? checkList() : checkSingle();\n      }\n\n      var origin = event.origin,\n          checkOrigin = settings[iframeId] && settings[iframeId].checkOrigin;\n\n      if (checkOrigin && '' + origin !== 'null' && !checkAllowedOrigin()) {\n        throw new Error('Unexpected message received from: ' + origin + ' for ' + messageData.iframe.id + '. Message was: ' + event.data + '. This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.');\n      }\n\n      return true;\n    }\n\n    function isMessageForUs() {\n      return msgId === ('' + msg).substr(0, msgIdLen) && msg.substr(msgIdLen).split(':')[0] in settings; //''+Protects against non-string msg\n    }\n\n    function isMessageFromMetaParent() {\n      //Test if this message is from a parent above us. This is an ugly test, however, updating\n      //the message format would break backwards compatibity.\n      var retCode = messageData.type in {\n        \"true\": 1,\n        \"false\": 1,\n        undefined: 1\n      };\n\n      if (retCode) {\n        log(iframeId, 'Ignoring init message from meta parent page');\n      }\n\n      return retCode;\n    }\n\n    function getMsgBody(offset) {\n      return msg.substr(msg.indexOf(':') + msgHeaderLen + offset);\n    }\n\n    function forwardMsgFromIFrame(msgBody) {\n      log(iframeId, 'MessageCallback passed: {iframe: ' + messageData.iframe.id + ', message: ' + msgBody + '}');\n      callback('messageCallback', {\n        iframe: messageData.iframe,\n        message: JSON.parse(msgBody)\n      });\n      log(iframeId, '--');\n    }\n\n    function getPageInfo() {\n      var bodyPosition = document.body.getBoundingClientRect(),\n          iFramePosition = messageData.iframe.getBoundingClientRect();\n      return JSON.stringify({\n        iframeHeight: iFramePosition.height,\n        iframeWidth: iFramePosition.width,\n        clientHeight: Math.max(document.documentElement.clientHeight, window.innerHeight || 0),\n        clientWidth: Math.max(document.documentElement.clientWidth, window.innerWidth || 0),\n        offsetTop: parseInt(iFramePosition.top - bodyPosition.top, 10),\n        offsetLeft: parseInt(iFramePosition.left - bodyPosition.left, 10),\n        scrollTop: window.pageYOffset,\n        scrollLeft: window.pageXOffset\n      });\n    }\n\n    function sendPageInfoToIframe(iframe, iframeId) {\n      function debouncedTrigger() {\n        trigger('Send Page Info', 'pageInfo:' + getPageInfo(), iframe, iframeId);\n      }\n\n      debounceFrameEvents(debouncedTrigger, 32, iframeId);\n    }\n\n    function startPageInfoMonitor() {\n      function setListener(type, func) {\n        function sendPageInfo() {\n          if (settings[id]) {\n            sendPageInfoToIframe(settings[id].iframe, id);\n          } else {\n            stop();\n          }\n        }\n\n        ['scroll', 'resize'].forEach(function (evt) {\n          log(id, type + evt + ' listener for sendPageInfo');\n          func(window, evt, sendPageInfo);\n        });\n      }\n\n      function stop() {\n        setListener('Remove ', removeEventListener);\n      }\n\n      function start() {\n        setListener('Add ', addEventListener);\n      }\n\n      var id = iframeId; //Create locally scoped copy of iFrame ID\n\n      start();\n\n      if (settings[id]) {\n        settings[id].stopPageInfo = stop;\n      }\n    }\n\n    function stopPageInfoMonitor() {\n      if (settings[iframeId] && settings[iframeId].stopPageInfo) {\n        settings[iframeId].stopPageInfo();\n        delete settings[iframeId].stopPageInfo;\n      }\n    }\n\n    function checkIFrameExists() {\n      var retBool = true;\n\n      if (null === messageData.iframe) {\n        warn(iframeId, 'IFrame (' + messageData.id + ') not found');\n        retBool = false;\n      }\n\n      return retBool;\n    }\n\n    function getElementPosition(target) {\n      var iFramePosition = target.getBoundingClientRect();\n      getPagePosition(iframeId);\n      return {\n        x: Math.floor(Number(iFramePosition.left) + Number(pagePosition.x)),\n        y: Math.floor(Number(iFramePosition.top) + Number(pagePosition.y))\n      };\n    }\n\n    function scrollRequestFromChild(addOffset) {\n      /* istanbul ignore next */\n      //Not testable in Karma\n      function reposition() {\n        pagePosition = newPosition;\n        scrollTo();\n        log(iframeId, '--');\n      }\n\n      function calcOffset() {\n        return {\n          x: Number(messageData.width) + offset.x,\n          y: Number(messageData.height) + offset.y\n        };\n      }\n\n      function scrollParent() {\n        if (window.parentIFrame) {\n          window.parentIFrame['scrollTo' + (addOffset ? 'Offset' : '')](newPosition.x, newPosition.y);\n        } else {\n          warn(iframeId, 'Unable to scroll to requested position, window.parentIFrame not found');\n        }\n      }\n\n      var offset = addOffset ? getElementPosition(messageData.iframe) : {\n        x: 0,\n        y: 0\n      },\n          newPosition = calcOffset();\n      log(iframeId, 'Reposition requested from iFrame (offset x:' + offset.x + ' y:' + offset.y + ')');\n\n      if (window.top !== window.self) {\n        scrollParent();\n      } else {\n        reposition();\n      }\n    }\n\n    function scrollTo() {\n      if (false !== callback('scrollCallback', pagePosition)) {\n        setPagePosition(iframeId);\n      } else {\n        unsetPagePosition();\n      }\n    }\n\n    function findTarget(location) {\n      function jumpToTarget() {\n        var jumpPosition = getElementPosition(target);\n        log(iframeId, 'Moving to in page link (#' + hash + ') at x: ' + jumpPosition.x + ' y: ' + jumpPosition.y);\n        pagePosition = {\n          x: jumpPosition.x,\n          y: jumpPosition.y\n        };\n        scrollTo();\n        log(iframeId, '--');\n      }\n\n      function jumpToParent() {\n        if (window.parentIFrame) {\n          window.parentIFrame.moveToAnchor(hash);\n        } else {\n          log(iframeId, 'In page link #' + hash + ' not found and window.parentIFrame not found');\n        }\n      }\n\n      var hash = location.split('#')[1] || '',\n          hashData = decodeURIComponent(hash),\n          target = document.getElementById(hashData) || document.getElementsByName(hashData)[0];\n\n      if (target) {\n        jumpToTarget();\n      } else if (window.top !== window.self) {\n        jumpToParent();\n      } else {\n        log(iframeId, 'In page link #' + hash + ' not found');\n      }\n    }\n\n    function callback(funcName, val) {\n      return chkCallback(iframeId, funcName, val);\n    }\n\n    function actionMsg() {\n      if (settings[iframeId] && settings[iframeId].firstRun) firstRun();\n\n      switch (messageData.type) {\n        case 'close':\n          if (settings[iframeId].closeRequestCallback) chkCallback(iframeId, 'closeRequestCallback', settings[iframeId].iframe);else closeIFrame(messageData.iframe);\n          break;\n\n        case 'message':\n          forwardMsgFromIFrame(getMsgBody(6));\n          break;\n\n        case 'scrollTo':\n          scrollRequestFromChild(false);\n          break;\n\n        case 'scrollToOffset':\n          scrollRequestFromChild(true);\n          break;\n\n        case 'pageInfo':\n          sendPageInfoToIframe(settings[iframeId] && settings[iframeId].iframe, iframeId);\n          startPageInfoMonitor();\n          break;\n\n        case 'pageInfoStop':\n          stopPageInfoMonitor();\n          break;\n\n        case 'inPageLink':\n          findTarget(getMsgBody(9));\n          break;\n\n        case 'reset':\n          resetIFrame(messageData);\n          break;\n\n        case 'init':\n          resizeIFrame();\n          callback('initCallback', messageData.iframe);\n          break;\n\n        default:\n          resizeIFrame();\n      }\n    }\n\n    function hasSettings(iframeId) {\n      var retBool = true;\n\n      if (!settings[iframeId]) {\n        retBool = false;\n        warn(messageData.type + ' No settings for ' + iframeId + '. Message was: ' + msg);\n      }\n\n      return retBool;\n    }\n\n    function iFrameReadyMsgReceived() {\n      for (var iframeId in settings) {\n        trigger('iFrame requested init', createOutgoingMsg(iframeId), document.getElementById(iframeId), iframeId);\n      }\n    }\n\n    function firstRun() {\n      if (settings[iframeId]) {\n        settings[iframeId].firstRun = false;\n      }\n    }\n\n    function clearWarningTimeout() {\n      if (settings[iframeId]) {\n        clearTimeout(settings[iframeId].msgTimeout);\n        settings[iframeId].warningTimeout = 0;\n      }\n    }\n\n    var msg = event.data,\n        messageData = {},\n        iframeId = null;\n\n    if ('[iFrameResizerChild]Ready' === msg) {\n      iFrameReadyMsgReceived();\n    } else if (isMessageForUs()) {\n      messageData = processMsg();\n      iframeId = logId = messageData.id;\n\n      if (settings[iframeId]) {\n        settings[iframeId].loaded = true;\n      }\n\n      if (!isMessageFromMetaParent() && hasSettings(iframeId)) {\n        log(iframeId, 'Received: ' + msg);\n\n        if (checkIFrameExists() && isMessageFromIFrame()) {\n          actionMsg();\n        }\n      }\n    } else {\n      info(iframeId, 'Ignored: ' + msg);\n    }\n  }\n\n  function chkCallback(iframeId, funcName, val) {\n    var func = null,\n        retVal = null;\n\n    if (settings[iframeId]) {\n      func = settings[iframeId][funcName];\n\n      if ('function' === typeof func) {\n        retVal = func(val);\n      } else {\n        throw new TypeError(funcName + ' on iFrame[' + iframeId + '] is not a function');\n      }\n    }\n\n    return retVal;\n  }\n\n  function removeIframeListeners(iframe) {\n    var iframeId = iframe.id;\n    delete settings[iframeId];\n  }\n\n  function closeIFrame(iframe) {\n    var iframeId = iframe.id;\n    log(iframeId, 'Removing iFrame: ' + iframeId);\n\n    try {\n      // Catch race condition error with React\n      if (iframe.parentNode) {\n        iframe.parentNode.removeChild(iframe);\n      }\n    } catch (e) {}\n\n    chkCallback(iframeId, 'closedCallback', iframeId);\n    log(iframeId, '--');\n    removeIframeListeners(iframe);\n  }\n\n  function getPagePosition(iframeId) {\n    if (null === pagePosition) {\n      pagePosition = {\n        x: window.pageXOffset !== undefined ? window.pageXOffset : document.documentElement.scrollLeft,\n        y: window.pageYOffset !== undefined ? window.pageYOffset : document.documentElement.scrollTop\n      };\n      log(iframeId, 'Get page position: ' + pagePosition.x + ',' + pagePosition.y);\n    }\n  }\n\n  function setPagePosition(iframeId) {\n    if (null !== pagePosition) {\n      window.scrollTo(pagePosition.x, pagePosition.y);\n      log(iframeId, 'Set page position: ' + pagePosition.x + ',' + pagePosition.y);\n      unsetPagePosition();\n    }\n  }\n\n  function unsetPagePosition() {\n    pagePosition = null;\n  }\n\n  function resetIFrame(messageData) {\n    function reset() {\n      setSize(messageData);\n      trigger('reset', 'reset', messageData.iframe, messageData.id);\n    }\n\n    log(messageData.id, 'Size reset requested by ' + ('init' === messageData.type ? 'host page' : 'iFrame'));\n    getPagePosition(messageData.id);\n    syncResize(reset, messageData, 'reset');\n  }\n\n  function setSize(messageData) {\n    function setDimension(dimension) {\n      if (!messageData.id) {\n        log('undefined', 'messageData id not set');\n        return;\n      }\n\n      messageData.iframe.style[dimension] = messageData[dimension] + 'px';\n      log(messageData.id, 'IFrame (' + iframeId + ') ' + dimension + ' set to ' + messageData[dimension] + 'px');\n    }\n\n    function chkZero(dimension) {\n      //FireFox sets dimension of hidden iFrames to zero.\n      //So if we detect that set up an event to check for\n      //when iFrame becomes visible.\n\n      /* istanbul ignore next */\n      //Not testable in PhantomJS\n      if (!hiddenCheckEnabled && '0' === messageData[dimension]) {\n        hiddenCheckEnabled = true;\n        log(iframeId, 'Hidden iFrame detected, creating visibility listener');\n        fixHiddenIFrames();\n      }\n    }\n\n    function processDimension(dimension) {\n      setDimension(dimension);\n      chkZero(dimension);\n    }\n\n    var iframeId = messageData.iframe.id;\n\n    if (settings[iframeId]) {\n      if (settings[iframeId].sizeHeight) {\n        processDimension('height');\n      }\n\n      if (settings[iframeId].sizeWidth) {\n        processDimension('width');\n      }\n    }\n  }\n\n  function syncResize(func, messageData, doNotSync) {\n    /* istanbul ignore if */\n    //Not testable in PhantomJS\n    if (doNotSync !== messageData.type && requestAnimationFrame) {\n      log(messageData.id, 'Requesting animation frame');\n      requestAnimationFrame(func);\n    } else {\n      func();\n    }\n  }\n\n  function trigger(calleeMsg, msg, iframe, id, noResponseWarning) {\n    function postMessageToIFrame() {\n      var target = settings[id] && settings[id].targetOrigin;\n      log(id, '[' + calleeMsg + '] Sending msg to iframe[' + id + '] (' + msg + ') targetOrigin: ' + target);\n      iframe.contentWindow.postMessage(msgId + msg, target);\n    }\n\n    function iFrameNotFound() {\n      warn(id, '[' + calleeMsg + '] IFrame(' + id + ') not found');\n    }\n\n    function chkAndSend() {\n      if (iframe && 'contentWindow' in iframe && null !== iframe.contentWindow) {\n        //Null test for PhantomJS\n        postMessageToIFrame();\n      } else {\n        iFrameNotFound();\n      }\n    }\n\n    function warnOnNoResponse() {\n      function warning() {\n        if (settings[id] && !settings[id].loaded && !errorShown) {\n          errorShown = true;\n          warn(id, 'IFrame has not responded within ' + settings[id].warningTimeout / 1000 + ' seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning.');\n        }\n      }\n\n      if (!!noResponseWarning && settings[id] && !!settings[id].warningTimeout) {\n        settings[id].msgTimeout = setTimeout(warning, settings[id].warningTimeout);\n      }\n    }\n\n    var errorShown = false;\n    id = id || iframe.id;\n\n    if (settings[id]) {\n      chkAndSend();\n      warnOnNoResponse();\n    }\n  }\n\n  function createOutgoingMsg(iframeId) {\n    return iframeId + ':' + settings[iframeId].bodyMarginV1 + ':' + settings[iframeId].sizeWidth + ':' + settings[iframeId].log + ':' + settings[iframeId].interval + ':' + settings[iframeId].enablePublicMethods + ':' + settings[iframeId].autoResize + ':' + settings[iframeId].bodyMargin + ':' + settings[iframeId].heightCalculationMethod + ':' + settings[iframeId].bodyBackground + ':' + settings[iframeId].bodyPadding + ':' + settings[iframeId].tolerance + ':' + settings[iframeId].inPageLinks + ':' + settings[iframeId].resizeFrom + ':' + settings[iframeId].widthCalculationMethod;\n  }\n\n  function setupIFrame(iframe, options) {\n    function setLimits() {\n      function addStyle(style) {\n        if (Infinity !== settings[iframeId][style] && 0 !== settings[iframeId][style]) {\n          iframe.style[style] = settings[iframeId][style] + 'px';\n          log(iframeId, 'Set ' + style + ' = ' + settings[iframeId][style] + 'px');\n        }\n      }\n\n      function chkMinMax(dimension) {\n        if (settings[iframeId]['min' + dimension] > settings[iframeId]['max' + dimension]) {\n          throw new Error('Value for min' + dimension + ' can not be greater than max' + dimension);\n        }\n      }\n\n      chkMinMax('Height');\n      chkMinMax('Width');\n      addStyle('maxHeight');\n      addStyle('minHeight');\n      addStyle('maxWidth');\n      addStyle('minWidth');\n    }\n\n    function newId() {\n      var id = options && options.id || defaults.id + count++;\n\n      if (null !== document.getElementById(id)) {\n        id = id + count++;\n      }\n\n      return id;\n    }\n\n    function ensureHasId(iframeId) {\n      logId = iframeId;\n\n      if ('' === iframeId) {\n        iframe.id = iframeId = newId();\n        logEnabled = (options || {}).log;\n        logId = iframeId;\n        log(iframeId, 'Added missing iframe ID: ' + iframeId + ' (' + iframe.src + ')');\n      }\n\n      return iframeId;\n    }\n\n    function setScrolling() {\n      log(iframeId, 'IFrame scrolling ' + (settings[iframeId] && settings[iframeId].scrolling ? 'enabled' : 'disabled') + ' for ' + iframeId);\n      iframe.style.overflow = false === (settings[iframeId] && settings[iframeId].scrolling) ? 'hidden' : 'auto';\n\n      switch (settings[iframeId] && settings[iframeId].scrolling) {\n        case 'omit':\n          break;\n\n        case true:\n          iframe.scrolling = 'yes';\n          break;\n\n        case false:\n          iframe.scrolling = 'no';\n          break;\n\n        default:\n          iframe.scrolling = settings[iframeId] ? settings[iframeId].scrolling : 'no';\n      }\n    } //The V1 iFrame script expects an int, where as in V2 expects a CSS\n    //string value such as '1px 3em', so if we have an int for V2, set V1=V2\n    //and then convert V2 to a string PX value.\n\n\n    function setupBodyMarginValues() {\n      if ('number' === typeof (settings[iframeId] && settings[iframeId].bodyMargin) || '0' === (settings[iframeId] && settings[iframeId].bodyMargin)) {\n        settings[iframeId].bodyMarginV1 = settings[iframeId].bodyMargin;\n        settings[iframeId].bodyMargin = '' + settings[iframeId].bodyMargin + 'px';\n      }\n    }\n\n    function checkReset() {\n      // Reduce scope of firstRun to function, because IE8's JS execution\n      // context stack is borked and this value gets externally\n      // changed midway through running this function!!!\n      var firstRun = settings[iframeId] && settings[iframeId].firstRun,\n          resetRequertMethod = settings[iframeId] && settings[iframeId].heightCalculationMethod in resetRequiredMethods;\n\n      if (!firstRun && resetRequertMethod) {\n        resetIFrame({\n          iframe: iframe,\n          height: 0,\n          width: 0,\n          type: 'init'\n        });\n      }\n    }\n\n    function setupIFrameObject() {\n      if (Function.prototype.bind && settings[iframeId]) {\n        //Ignore unpolyfilled IE8.\n        settings[iframeId].iframe.iFrameResizer = {\n          close: closeIFrame.bind(null, settings[iframeId].iframe),\n          removeListeners: removeIframeListeners.bind(null, settings[iframeId].iframe),\n          resize: trigger.bind(null, 'Window resize', 'resize', settings[iframeId].iframe),\n          moveToAnchor: function moveToAnchor(anchor) {\n            trigger('Move to anchor', 'moveToAnchor:' + anchor, settings[iframeId].iframe, iframeId);\n          },\n          sendMessage: function sendMessage(message) {\n            message = JSON.stringify(message);\n            trigger('Send Message', 'message:' + message, settings[iframeId].iframe, iframeId);\n          }\n        };\n      }\n    } //We have to call trigger twice, as we can not be sure if all\n    //iframes have completed loading when this code runs. The\n    //event listener also catches the page changing in the iFrame.\n\n\n    function init(msg) {\n      function iFrameLoaded() {\n        trigger('iFrame.onload', msg, iframe, undefined, true);\n        checkReset();\n      }\n\n      function createDestroyObserver(MutationObserver) {\n        if (!iframe.parentNode) {\n          return;\n        }\n\n        var destroyObserver = new MutationObserver(function (mutations) {\n          mutations.forEach(function (mutation) {\n            var removedNodes = Array.prototype.slice.call(mutation.removedNodes); // Transform NodeList into an Array\n\n            removedNodes.forEach(function (removedNode) {\n              if (removedNode === iframe) {\n                closeIFrame(iframe);\n              }\n            });\n          });\n        });\n        destroyObserver.observe(iframe.parentNode, {\n          childList: true\n        });\n      }\n\n      var MutationObserver = getMutationObserver();\n\n      if (MutationObserver) {\n        createDestroyObserver(MutationObserver);\n      }\n\n      addEventListener(iframe, 'load', iFrameLoaded);\n      trigger('init', msg, iframe, undefined, true);\n    }\n\n    function checkOptions(options) {\n      if ('object' !== typeof options) {\n        throw new TypeError('Options is not an object');\n      }\n    }\n\n    function copyOptions(options) {\n      for (var option in defaults) {\n        if (defaults.hasOwnProperty(option)) {\n          settings[iframeId][option] = options.hasOwnProperty(option) ? options[option] : defaults[option];\n        }\n      }\n    }\n\n    function getTargetOrigin(remoteHost) {\n      return '' === remoteHost || 'file://' === remoteHost ? '*' : remoteHost;\n    }\n\n    function processOptions(options) {\n      options = options || {};\n      settings[iframeId] = {\n        firstRun: true,\n        iframe: iframe,\n        remoteHost: iframe.src.split('/').slice(0, 3).join('/')\n      };\n      checkOptions(options);\n      copyOptions(options);\n\n      if (settings[iframeId]) {\n        settings[iframeId].targetOrigin = true === settings[iframeId].checkOrigin ? getTargetOrigin(settings[iframeId].remoteHost) : '*';\n      }\n    }\n\n    function beenHere() {\n      return iframeId in settings && 'iFrameResizer' in iframe;\n    }\n\n    var iframeId = ensureHasId(iframe.id);\n\n    if (!beenHere()) {\n      processOptions(options);\n      setScrolling();\n      setLimits();\n      setupBodyMarginValues();\n      init(createOutgoingMsg(iframeId));\n      setupIFrameObject();\n    } else {\n      warn(iframeId, 'Ignored iFrame, already setup.');\n    }\n  }\n\n  function debouce(fn, time) {\n    if (null === timer) {\n      timer = setTimeout(function () {\n        timer = null;\n        fn();\n      }, time);\n    }\n  }\n\n  var frameTimer = {};\n\n  function debounceFrameEvents(fn, time, frameId) {\n    if (!frameTimer[frameId]) {\n      frameTimer[frameId] = setTimeout(function () {\n        frameTimer[frameId] = null;\n        fn();\n      }, time);\n    }\n  } //Not testable in PhantomJS\n\n  /* istanbul ignore next */\n\n\n  function fixHiddenIFrames() {\n    function checkIFrames() {\n      function checkIFrame(settingId) {\n        function chkDimension(dimension) {\n          return '0px' === (settings[settingId] && settings[settingId].iframe.style[dimension]);\n        }\n\n        function isVisible(el) {\n          return null !== el.offsetParent;\n        }\n\n        if (settings[settingId] && isVisible(settings[settingId].iframe) && (chkDimension('height') || chkDimension('width'))) {\n          trigger('Visibility change', 'resize', settings[settingId].iframe, settingId);\n        }\n      }\n\n      for (var settingId in settings) {\n        checkIFrame(settingId);\n      }\n    }\n\n    function mutationObserved(mutations) {\n      log('window', 'Mutation observed: ' + mutations[0].target + ' ' + mutations[0].type);\n      debouce(checkIFrames, 16);\n    }\n\n    function createMutationObserver() {\n      var target = document.querySelector('body'),\n          config = {\n        attributes: true,\n        attributeOldValue: false,\n        characterData: true,\n        characterDataOldValue: false,\n        childList: true,\n        subtree: true\n      },\n          observer = new MutationObserver(mutationObserved);\n      observer.observe(target, config);\n    }\n\n    var MutationObserver = getMutationObserver();\n\n    if (MutationObserver) {\n      createMutationObserver();\n    }\n  }\n\n  function resizeIFrames(event) {\n    function resize() {\n      sendTriggerMsg('Window ' + event, 'resize');\n    }\n\n    log('window', 'Trigger event: ' + event);\n    debouce(resize, 16);\n  } //Not testable in PhantomJS\n\n  /* istanbul ignore next */\n\n\n  function tabVisible() {\n    function resize() {\n      sendTriggerMsg('Tab Visable', 'resize');\n    }\n\n    if ('hidden' !== document.visibilityState) {\n      log('document', 'Trigger event: Visiblity change');\n      debouce(resize, 16);\n    }\n  }\n\n  function sendTriggerMsg(eventName, event) {\n    function isIFrameResizeEnabled(iframeId) {\n      return settings[iframeId] && 'parent' === settings[iframeId].resizeFrom && settings[iframeId].autoResize && !settings[iframeId].firstRun;\n    }\n\n    for (var iframeId in settings) {\n      if (isIFrameResizeEnabled(iframeId)) {\n        trigger(eventName, event, document.getElementById(iframeId), iframeId);\n      }\n    }\n  }\n\n  function setupEventListeners() {\n    addEventListener(window, 'message', iFrameListener);\n    addEventListener(window, 'resize', function () {\n      resizeIFrames('resize');\n    });\n    addEventListener(document, 'visibilitychange', tabVisible);\n    addEventListener(document, '-webkit-visibilitychange', tabVisible); //Andriod 4.4\n\n    addEventListener(window, 'focusin', function () {\n      resizeIFrames('focus');\n    }); //IE8-9\n\n    addEventListener(window, 'focus', function () {\n      resizeIFrames('focus');\n    });\n  }\n\n  function factory() {\n    function init(options, element) {\n      function chkType() {\n        if (!element.tagName) {\n          throw new TypeError('Object is not a valid DOM element');\n        } else if ('IFRAME' !== element.tagName.toUpperCase()) {\n          throw new TypeError('Expected <IFRAME> tag, found <' + element.tagName + '>');\n        }\n      }\n\n      if (element) {\n        chkType();\n        setupIFrame(element, options);\n        iFrames.push(element);\n      }\n    }\n\n    function warnDeprecatedOptions(options) {\n      if (options && options.enablePublicMethods) {\n        warn('enablePublicMethods option has been removed, public methods are now always available in the iFrame');\n      }\n    }\n\n    var iFrames;\n    setupRequestAnimationFrame();\n    setupEventListeners();\n    return function iFrameResizeF(options, target) {\n      iFrames = []; //Only return iFrames past in on this call\n\n      warnDeprecatedOptions(options);\n\n      switch (typeof target) {\n        case 'undefined':\n        case 'string':\n          Array.prototype.forEach.call(document.querySelectorAll(target || 'iframe'), init.bind(undefined, options));\n          break;\n\n        case 'object':\n          init(options, target);\n          break;\n\n        default:\n          throw new TypeError('Unexpected data type (' + typeof target + ')');\n      }\n\n      return iFrames;\n    };\n  }\n\n  function createJQueryPublicMethod($) {\n    if (!$.fn) {\n      info('', 'Unable to bind to jQuery, it is not fully loaded.');\n    } else if (!$.fn.iFrameResize) {\n      $.fn.iFrameResize = function $iFrameResizeF(options) {\n        function init(index, element) {\n          setupIFrame(element, options);\n        }\n\n        return this.filter('iframe').each(init).end();\n      };\n    }\n  }\n\n  if (window.jQuery) {\n    createJQueryPublicMethod(window.jQuery);\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module === 'object' && typeof module.exports === 'object') {\n    //Node for browserfy\n    module.exports = factory();\n  }\n\n  window.iFrameResize = window.iFrameResize || factory();\n})();","require(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.array.map\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\n/*\n * File: iframeResizer.contentWindow.js\n * Desc: Include this file in any page being loaded into an iframe\n *       to force the iframe to resize to the content size.\n * Requires: iframeResizer.js on host page.\n * Doc: https://github.com/davidjbradshaw/iframe-resizer\n * Author: David J. Bradshaw - dave@bradshaw.net\n * Contributor: Jure Mav - jure.mav@gmail.com\n * Contributor: Ian Caunce - ian@hallnet.co.uk\n */\n(function (undefined) {\n  'use strict';\n\n  if (typeof window === 'undefined') return; // don't run for server side render\n\n  var autoResize = true,\n      base = 10,\n      bodyBackground = '',\n      bodyMargin = 0,\n      bodyMarginStr = '',\n      bodyObserver = null,\n      bodyPadding = '',\n      calculateWidth = false,\n      doubleEventList = {\n    resize: 1,\n    click: 1\n  },\n      eventCancelTimer = 128,\n      firstRun = true,\n      height = 1,\n      heightCalcModeDefault = 'bodyOffset',\n      heightCalcMode = heightCalcModeDefault,\n      initLock = true,\n      initMsg = '',\n      inPageLinks = {},\n      interval = 32,\n      intervalTimer = null,\n      logging = false,\n      msgID = '[iFrameSizer]',\n      //Must match host page msg ID\n  msgIdLen = msgID.length,\n      myID = '',\n      observer = null,\n      resetRequiredMethods = {\n    max: 1,\n    min: 1,\n    bodyScroll: 1,\n    documentElementScroll: 1\n  },\n      resizeFrom = 'child',\n      sendPermit = true,\n      target = window.parent,\n      targetOriginDefault = '*',\n      tolerance = 0,\n      triggerLocked = false,\n      triggerLockedTimer = null,\n      throttledTimer = 16,\n      width = 1,\n      widthCalcModeDefault = 'scroll',\n      widthCalcMode = widthCalcModeDefault,\n      win = window,\n      messageCallback = function messageCallback() {\n    warn('MessageCallback function not defined');\n  },\n      readyCallback = function readyCallback() {},\n      pageInfoCallback = function pageInfoCallback() {},\n      customCalcMethods = {\n    height: function height() {\n      warn('Custom height calculation function not defined');\n      return document.documentElement.offsetHeight;\n    },\n    width: function width() {\n      warn('Custom width calculation function not defined');\n      return document.body.scrollWidth;\n    }\n  },\n      eventHandlersByName = {},\n      passiveSupported = false,\n      onceSupported = false;\n\n  function noop() {}\n\n  try {\n    var options = Object.create({}, {\n      passive: {\n        get: function get() {\n          passiveSupported = true;\n        }\n      },\n      once: {\n        get: function get() {\n          onceSupported = true;\n        }\n      }\n    });\n    window.addEventListener('test', noop, options);\n    window.removeEventListener('test', noop, options);\n  } catch (e) {\n    /* */\n  }\n\n  function addEventListener(el, evt, func, options) {\n    /* istanbul ignore else */\n    // Not testable in phantomJS\n    if ('addEventListener' in window) {\n      el.addEventListener(evt, func, passiveSupported ? options || {} : false);\n    } else if ('attachEvent' in window) {\n      //IE\n      el.attachEvent('on' + evt, func);\n    }\n  }\n\n  function removeEventListener(el, evt, func) {\n    /* istanbul ignore else */\n    // Not testable in phantomJS\n    if ('removeEventListener' in window) {\n      el.removeEventListener(evt, func, false);\n    } else if ('detachEvent' in window) {\n      //IE\n      el.detachEvent('on' + evt, func);\n    }\n  }\n\n  function capitalizeFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  } //Based on underscore.js\n\n\n  function throttle(func) {\n    var context,\n        args,\n        result,\n        timeout = null,\n        previous = 0,\n        later = function later() {\n      previous = getNow();\n      timeout = null;\n      result = func.apply(context, args);\n\n      if (!timeout) {\n        context = args = null;\n      }\n    };\n\n    return function () {\n      var now = getNow();\n\n      if (!previous) {\n        previous = now;\n      }\n\n      var remaining = throttledTimer - (now - previous);\n      context = this;\n      args = arguments;\n\n      if (remaining <= 0 || remaining > throttledTimer) {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeout = null;\n        }\n\n        previous = now;\n        result = func.apply(context, args);\n\n        if (!timeout) {\n          context = args = null;\n        }\n      } else if (!timeout) {\n        timeout = setTimeout(later, remaining);\n      }\n\n      return result;\n    };\n  }\n\n  var getNow = Date.now || function () {\n    /* istanbul ignore next */\n    // Not testable in PhantonJS\n    return new Date().getTime();\n  };\n\n  function formatLogMsg(msg) {\n    return msgID + '[' + myID + ']' + ' ' + msg;\n  }\n\n  function log(msg) {\n    if (logging && 'object' === typeof window.console) {\n      console.log(formatLogMsg(msg));\n    }\n  }\n\n  function warn(msg) {\n    if ('object' === typeof window.console) {\n      console.warn(formatLogMsg(msg));\n    }\n  }\n\n  function init() {\n    readDataFromParent();\n    log('Initialising iFrame (' + location.href + ')');\n    readDataFromPage();\n    setMargin();\n    setBodyStyle('background', bodyBackground);\n    setBodyStyle('padding', bodyPadding);\n    injectClearFixIntoBodyElement();\n    checkHeightMode();\n    checkWidthMode();\n    stopInfiniteResizingOfIFrame();\n    setupPublicMethods();\n    startEventListeners();\n    inPageLinks = setupInPageLinks();\n    sendSize('init', 'Init message from host page');\n    readyCallback();\n  }\n\n  function readDataFromParent() {\n    function strBool(str) {\n      return 'true' === str ? true : false;\n    }\n\n    var data = initMsg.substr(msgIdLen).split(':');\n    myID = data[0];\n    bodyMargin = undefined !== data[1] ? Number(data[1]) : bodyMargin; //For V1 compatibility\n\n    calculateWidth = undefined !== data[2] ? strBool(data[2]) : calculateWidth;\n    logging = undefined !== data[3] ? strBool(data[3]) : logging;\n    interval = undefined !== data[4] ? Number(data[4]) : interval;\n    autoResize = undefined !== data[6] ? strBool(data[6]) : autoResize;\n    bodyMarginStr = data[7];\n    heightCalcMode = undefined !== data[8] ? data[8] : heightCalcMode;\n    bodyBackground = data[9];\n    bodyPadding = data[10];\n    tolerance = undefined !== data[11] ? Number(data[11]) : tolerance;\n    inPageLinks.enable = undefined !== data[12] ? strBool(data[12]) : false;\n    resizeFrom = undefined !== data[13] ? data[13] : resizeFrom;\n    widthCalcMode = undefined !== data[14] ? data[14] : widthCalcMode;\n  }\n\n  function readDataFromPage() {\n    function readData() {\n      var data = window.iFrameResizer;\n      log('Reading data from page: ' + JSON.stringify(data));\n      messageCallback = 'messageCallback' in data ? data.messageCallback : messageCallback;\n      readyCallback = 'readyCallback' in data ? data.readyCallback : readyCallback;\n      targetOriginDefault = 'targetOrigin' in data ? data.targetOrigin : targetOriginDefault;\n      heightCalcMode = 'heightCalculationMethod' in data ? data.heightCalculationMethod : heightCalcMode;\n      widthCalcMode = 'widthCalculationMethod' in data ? data.widthCalculationMethod : widthCalcMode;\n    }\n\n    function setupCustomCalcMethods(calcMode, calcFunc) {\n      if ('function' === typeof calcMode) {\n        log('Setup custom ' + calcFunc + 'CalcMethod');\n        customCalcMethods[calcFunc] = calcMode;\n        calcMode = 'custom';\n      }\n\n      return calcMode;\n    }\n\n    if ('iFrameResizer' in window && Object === window.iFrameResizer.constructor) {\n      readData();\n      heightCalcMode = setupCustomCalcMethods(heightCalcMode, 'height');\n      widthCalcMode = setupCustomCalcMethods(widthCalcMode, 'width');\n    }\n\n    log('TargetOrigin for parent set to: ' + targetOriginDefault);\n  }\n\n  function chkCSS(attr, value) {\n    if (-1 !== value.indexOf('-')) {\n      warn('Negative CSS value ignored for ' + attr);\n      value = '';\n    }\n\n    return value;\n  }\n\n  function setBodyStyle(attr, value) {\n    if (undefined !== value && '' !== value && 'null' !== value) {\n      document.body.style[attr] = value;\n      log('Body ' + attr + ' set to \"' + value + '\"');\n    }\n  }\n\n  function setMargin() {\n    //If called via V1 script, convert bodyMargin from int to str\n    if (undefined === bodyMarginStr) {\n      bodyMarginStr = bodyMargin + 'px';\n    }\n\n    setBodyStyle('margin', chkCSS('margin', bodyMarginStr));\n  }\n\n  function stopInfiniteResizingOfIFrame() {\n    document.documentElement.style.height = '';\n    document.body.style.height = '';\n    log('HTML & body height set to \"auto\"');\n  }\n\n  function manageTriggerEvent(options) {\n    var listener = {\n      add: function add(eventName) {\n        function handleEvent() {\n          sendSize(options.eventName, options.eventType);\n        }\n\n        eventHandlersByName[eventName] = handleEvent;\n        addEventListener(window, eventName, handleEvent, {\n          passive: true\n        });\n      },\n      remove: function remove(eventName) {\n        var handleEvent = eventHandlersByName[eventName];\n        delete eventHandlersByName[eventName];\n        removeEventListener(window, eventName, handleEvent);\n      }\n    };\n\n    if (options.eventNames && Array.prototype.map) {\n      options.eventName = options.eventNames[0];\n      options.eventNames.map(listener[options.method]);\n    } else {\n      listener[options.method](options.eventName);\n    }\n\n    log(capitalizeFirstLetter(options.method) + ' event listener: ' + options.eventType);\n  }\n\n  function manageEventListeners(method) {\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Animation Start',\n      eventNames: ['animationstart', 'webkitAnimationStart']\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Animation Iteration',\n      eventNames: ['animationiteration', 'webkitAnimationIteration']\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Animation End',\n      eventNames: ['animationend', 'webkitAnimationEnd']\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Input',\n      eventName: 'input'\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Mouse Up',\n      eventName: 'mouseup'\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Mouse Down',\n      eventName: 'mousedown'\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Orientation Change',\n      eventName: 'orientationchange'\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Print',\n      eventName: ['afterprint', 'beforeprint']\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Ready State Change',\n      eventName: 'readystatechange'\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Touch Start',\n      eventName: 'touchstart'\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Touch End',\n      eventName: 'touchend'\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Touch Cancel',\n      eventName: 'touchcancel'\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Transition Start',\n      eventNames: ['transitionstart', 'webkitTransitionStart', 'MSTransitionStart', 'oTransitionStart', 'otransitionstart']\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Transition Iteration',\n      eventNames: ['transitioniteration', 'webkitTransitionIteration', 'MSTransitionIteration', 'oTransitionIteration', 'otransitioniteration']\n    });\n    manageTriggerEvent({\n      method: method,\n      eventType: 'Transition End',\n      eventNames: ['transitionend', 'webkitTransitionEnd', 'MSTransitionEnd', 'oTransitionEnd', 'otransitionend']\n    });\n\n    if ('child' === resizeFrom) {\n      manageTriggerEvent({\n        method: method,\n        eventType: 'IFrame Resized',\n        eventName: 'resize'\n      });\n    }\n  }\n\n  function checkCalcMode(calcMode, calcModeDefault, modes, type) {\n    if (calcModeDefault !== calcMode) {\n      if (!(calcMode in modes)) {\n        warn(calcMode + ' is not a valid option for ' + type + 'CalculationMethod.');\n        calcMode = calcModeDefault;\n      }\n\n      log(type + ' calculation method set to \"' + calcMode + '\"');\n    }\n\n    return calcMode;\n  }\n\n  function checkHeightMode() {\n    heightCalcMode = checkCalcMode(heightCalcMode, heightCalcModeDefault, getHeight, 'height');\n  }\n\n  function checkWidthMode() {\n    widthCalcMode = checkCalcMode(widthCalcMode, widthCalcModeDefault, getWidth, 'width');\n  }\n\n  function startEventListeners() {\n    if (true === autoResize) {\n      manageEventListeners('add');\n      setupMutationObserver();\n    } else {\n      log('Auto Resize disabled');\n    }\n  }\n\n  function stopMsgsToParent() {\n    log('Disable outgoing messages');\n    sendPermit = false;\n  }\n\n  function removeMsgListener() {\n    log('Remove event listener: Message');\n    removeEventListener(window, 'message', receiver);\n  }\n\n  function disconnectMutationObserver() {\n    if (null !== bodyObserver) {\n      /* istanbul ignore next */\n      // Not testable in PhantonJS\n      bodyObserver.disconnect();\n    }\n  }\n\n  function stopEventListeners() {\n    manageEventListeners('remove');\n    disconnectMutationObserver();\n    clearInterval(intervalTimer);\n  }\n\n  function teardown() {\n    stopMsgsToParent();\n    removeMsgListener();\n    if (true === autoResize) stopEventListeners();\n  }\n\n  function injectClearFixIntoBodyElement() {\n    var clearFix = document.createElement('div');\n    clearFix.style.clear = 'both';\n    clearFix.style.display = 'block'; //Guard against this having been globally redefined in CSS.\n\n    document.body.appendChild(clearFix);\n  }\n\n  function setupInPageLinks() {\n    function getPagePosition() {\n      return {\n        x: window.pageXOffset !== undefined ? window.pageXOffset : document.documentElement.scrollLeft,\n        y: window.pageYOffset !== undefined ? window.pageYOffset : document.documentElement.scrollTop\n      };\n    }\n\n    function getElementPosition(el) {\n      var elPosition = el.getBoundingClientRect(),\n          pagePosition = getPagePosition();\n      return {\n        x: parseInt(elPosition.left, 10) + parseInt(pagePosition.x, 10),\n        y: parseInt(elPosition.top, 10) + parseInt(pagePosition.y, 10)\n      };\n    }\n\n    function findTarget(location) {\n      function jumpToTarget(target) {\n        var jumpPosition = getElementPosition(target);\n        log('Moving to in page link (#' + hash + ') at x: ' + jumpPosition.x + ' y: ' + jumpPosition.y);\n        sendMsg(jumpPosition.y, jumpPosition.x, 'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n      }\n\n      var hash = location.split('#')[1] || location,\n          //Remove # if present\n      hashData = decodeURIComponent(hash),\n          target = document.getElementById(hashData) || document.getElementsByName(hashData)[0];\n\n      if (undefined !== target) {\n        jumpToTarget(target);\n      } else {\n        log('In page link (#' + hash + ') not found in iFrame, so sending to parent');\n        sendMsg(0, 0, 'inPageLink', '#' + hash);\n      }\n    }\n\n    function checkLocationHash() {\n      if ('' !== location.hash && '#' !== location.hash) {\n        findTarget(location.href);\n      }\n    }\n\n    function bindAnchors() {\n      function setupLink(el) {\n        function linkClicked(e) {\n          e.preventDefault();\n          /*jshint validthis:true */\n\n          findTarget(this.getAttribute('href'));\n        }\n\n        if ('#' !== el.getAttribute('href')) {\n          addEventListener(el, 'click', linkClicked);\n        }\n      }\n\n      Array.prototype.forEach.call(document.querySelectorAll('a[href^=\"#\"]'), setupLink);\n    }\n\n    function bindLocationHash() {\n      addEventListener(window, 'hashchange', checkLocationHash);\n    }\n\n    function initCheck() {\n      //check if page loaded with location hash after init resize\n      setTimeout(checkLocationHash, eventCancelTimer);\n    }\n\n    function enableInPageLinks() {\n      /* istanbul ignore else */\n      // Not testable in phantonJS\n      if (Array.prototype.forEach && document.querySelectorAll) {\n        log('Setting up location.hash handlers');\n        bindAnchors();\n        bindLocationHash();\n        initCheck();\n      } else {\n        warn('In page linking not fully supported in this browser! (See README.md for IE8 workaround)');\n      }\n    }\n\n    if (inPageLinks.enable) {\n      enableInPageLinks();\n    } else {\n      log('In page linking not enabled');\n    }\n\n    return {\n      findTarget: findTarget\n    };\n  }\n\n  function setupPublicMethods() {\n    log('Enable public methods');\n    win.parentIFrame = {\n      autoResize: function autoResizeF(resize) {\n        if (true === resize && false === autoResize) {\n          autoResize = true;\n          startEventListeners(); //sendSize('autoResize','Auto Resize enabled');\n        } else if (false === resize && true === autoResize) {\n          autoResize = false;\n          stopEventListeners();\n        }\n\n        return autoResize;\n      },\n      close: function closeF() {\n        sendMsg(0, 0, 'close');\n        teardown();\n      },\n      getId: function getIdF() {\n        return myID;\n      },\n      getPageInfo: function getPageInfoF(callback) {\n        if ('function' === typeof callback) {\n          pageInfoCallback = callback;\n          sendMsg(0, 0, 'pageInfo');\n        } else {\n          pageInfoCallback = function pageInfoCallback() {};\n\n          sendMsg(0, 0, 'pageInfoStop');\n        }\n      },\n      moveToAnchor: function moveToAnchorF(hash) {\n        inPageLinks.findTarget(hash);\n      },\n      reset: function resetF() {\n        resetIFrame('parentIFrame.reset');\n      },\n      scrollTo: function scrollToF(x, y) {\n        sendMsg(y, x, 'scrollTo'); // X&Y reversed at sendMsg uses height/width\n      },\n      scrollToOffset: function scrollToF(x, y) {\n        sendMsg(y, x, 'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n      },\n      sendMessage: function sendMessageF(msg, targetOrigin) {\n        sendMsg(0, 0, 'message', JSON.stringify(msg), targetOrigin);\n      },\n      setHeightCalculationMethod: function setHeightCalculationMethodF(heightCalculationMethod) {\n        heightCalcMode = heightCalculationMethod;\n        checkHeightMode();\n      },\n      setWidthCalculationMethod: function setWidthCalculationMethodF(widthCalculationMethod) {\n        widthCalcMode = widthCalculationMethod;\n        checkWidthMode();\n      },\n      setTargetOrigin: function setTargetOriginF(targetOrigin) {\n        log('Set targetOrigin: ' + targetOrigin);\n        targetOriginDefault = targetOrigin;\n      },\n      size: function sizeF(customHeight, customWidth) {\n        var valString = '' + (customHeight ? customHeight : '') + (customWidth ? ',' + customWidth : ''); //lockTrigger();\n\n        sendSize('size', 'parentIFrame.size(' + valString + ')', customHeight, customWidth);\n      }\n    };\n  }\n\n  function initInterval() {\n    if (0 !== interval) {\n      log('setInterval: ' + interval + 'ms');\n      intervalTimer = setInterval(function () {\n        sendSize('interval', 'setInterval: ' + interval);\n      }, Math.abs(interval));\n    }\n  } //Not testable in PhantomJS\n\n  /* istanbul ignore next */\n\n\n  function setupBodyMutationObserver() {\n    function addImageLoadListners(mutation) {\n      function addImageLoadListener(element) {\n        if (false === element.complete) {\n          log('Attach listeners to ' + element.src);\n          element.addEventListener('load', imageLoaded, false);\n          element.addEventListener('error', imageError, false);\n          elements.push(element);\n        }\n      }\n\n      if (mutation.type === 'attributes' && mutation.attributeName === 'src') {\n        addImageLoadListener(mutation.target);\n      } else if (mutation.type === 'childList') {\n        Array.prototype.forEach.call(mutation.target.querySelectorAll('img'), addImageLoadListener);\n      }\n    }\n\n    function removeFromArray(element) {\n      elements.splice(elements.indexOf(element), 1);\n    }\n\n    function removeImageLoadListener(element) {\n      log('Remove listeners from ' + element.src);\n      element.removeEventListener('load', imageLoaded, false);\n      element.removeEventListener('error', imageError, false);\n      removeFromArray(element);\n    }\n\n    function imageEventTriggered(event, type, typeDesc) {\n      removeImageLoadListener(event.target);\n      sendSize(type, typeDesc + ': ' + event.target.src, undefined, undefined);\n    }\n\n    function imageLoaded(event) {\n      imageEventTriggered(event, 'imageLoad', 'Image loaded');\n    }\n\n    function imageError(event) {\n      imageEventTriggered(event, 'imageLoadFailed', 'Image load failed');\n    }\n\n    function mutationObserved(mutations) {\n      sendSize('mutationObserver', 'mutationObserver: ' + mutations[0].target + ' ' + mutations[0].type); //Deal with WebKit asyncing image loading when tags are injected into the page\n\n      mutations.forEach(addImageLoadListners);\n    }\n\n    function createMutationObserver() {\n      var target = document.querySelector('body'),\n          config = {\n        attributes: true,\n        attributeOldValue: false,\n        characterData: true,\n        characterDataOldValue: false,\n        childList: true,\n        subtree: true\n      };\n      observer = new MutationObserver(mutationObserved);\n      log('Create body MutationObserver');\n      observer.observe(target, config);\n      return observer;\n    }\n\n    var elements = [],\n        MutationObserver = window.MutationObserver || window.WebKitMutationObserver,\n        observer = createMutationObserver();\n    return {\n      disconnect: function disconnect() {\n        if ('disconnect' in observer) {\n          log('Disconnect body MutationObserver');\n          observer.disconnect();\n          elements.forEach(removeImageLoadListener);\n        }\n      }\n    };\n  }\n\n  function setupMutationObserver() {\n    var forceIntervalTimer = 0 > interval; // Not testable in PhantomJS\n\n    /* istanbul ignore if */\n\n    if (window.MutationObserver || window.WebKitMutationObserver) {\n      if (forceIntervalTimer) {\n        initInterval();\n      } else {\n        bodyObserver = setupBodyMutationObserver();\n      }\n    } else {\n      log('MutationObserver not supported in this browser!');\n      initInterval();\n    }\n  } // document.documentElement.offsetHeight is not reliable, so\n  // we have to jump through hoops to get a better value.\n\n\n  function getComputedStyle(prop, el) {\n    /* istanbul ignore next */\n    //Not testable in PhantomJS\n    function convertUnitsToPxForIE8(value) {\n      var PIXEL = /^\\d+(px)?$/i;\n\n      if (PIXEL.test(value)) {\n        return parseInt(value, base);\n      }\n\n      var style = el.style.left,\n          runtimeStyle = el.runtimeStyle.left;\n      el.runtimeStyle.left = el.currentStyle.left;\n      el.style.left = value || 0;\n      value = el.style.pixelLeft;\n      el.style.left = style;\n      el.runtimeStyle.left = runtimeStyle;\n      return value;\n    }\n\n    var retVal = 0;\n    el = el || document.body; // Not testable in phantonJS\n\n    /* istanbul ignore else */\n\n    if ('defaultView' in document && 'getComputedStyle' in document.defaultView) {\n      retVal = document.defaultView.getComputedStyle(el, null);\n      retVal = null !== retVal ? retVal[prop] : 0;\n    } else {\n      //IE8\n      retVal = convertUnitsToPxForIE8(el.currentStyle[prop]);\n    }\n\n    return parseInt(retVal, base);\n  }\n\n  function chkEventThottle(timer) {\n    if (timer > throttledTimer / 2) {\n      throttledTimer = 2 * timer;\n      log('Event throttle increased to ' + throttledTimer + 'ms');\n    }\n  } //Idea from https://github.com/guardian/iframe-messenger\n\n\n  function getMaxElement(side, elements) {\n    var elementsLength = elements.length,\n        elVal = 0,\n        maxVal = 0,\n        Side = capitalizeFirstLetter(side),\n        timer = getNow();\n\n    for (var i = 0; i < elementsLength; i++) {\n      elVal = elements[i].getBoundingClientRect()[side] + getComputedStyle('margin' + Side, elements[i]);\n\n      if (elVal > maxVal) {\n        maxVal = elVal;\n      }\n    }\n\n    timer = getNow() - timer;\n    log('Parsed ' + elementsLength + ' HTML elements');\n    log('Element position calculated in ' + timer + 'ms');\n    chkEventThottle(timer);\n    return maxVal;\n  }\n\n  function getAllMeasurements(dimention) {\n    return [dimention.bodyOffset(), dimention.bodyScroll(), dimention.documentElementOffset(), dimention.documentElementScroll()];\n  }\n\n  function getTaggedElements(side, tag) {\n    function noTaggedElementsFound() {\n      warn('No tagged elements (' + tag + ') found on page');\n      return document.querySelectorAll('body *');\n    }\n\n    var elements = document.querySelectorAll('[' + tag + ']');\n    if (0 === elements.length) noTaggedElementsFound();\n    return getMaxElement(side, elements);\n  }\n\n  function getAllElements() {\n    return document.querySelectorAll('body *');\n  }\n\n  var getHeight = {\n    bodyOffset: function getBodyOffsetHeight() {\n      return document.body.offsetHeight + getComputedStyle('marginTop') + getComputedStyle('marginBottom');\n    },\n    offset: function offset() {\n      return getHeight.bodyOffset(); //Backwards compatability\n    },\n    bodyScroll: function getBodyScrollHeight() {\n      return document.body.scrollHeight;\n    },\n    custom: function getCustomWidth() {\n      return customCalcMethods.height();\n    },\n    documentElementOffset: function getDEOffsetHeight() {\n      return document.documentElement.offsetHeight;\n    },\n    documentElementScroll: function getDEScrollHeight() {\n      return document.documentElement.scrollHeight;\n    },\n    max: function getMaxHeight() {\n      return Math.max.apply(null, getAllMeasurements(getHeight));\n    },\n    min: function getMinHeight() {\n      return Math.min.apply(null, getAllMeasurements(getHeight));\n    },\n    grow: function growHeight() {\n      return getHeight.max(); //Run max without the forced downsizing\n    },\n    lowestElement: function getBestHeight() {\n      return Math.max(getHeight.bodyOffset() || getHeight.documentElementOffset(), getMaxElement('bottom', getAllElements()));\n    },\n    taggedElement: function getTaggedElementsHeight() {\n      return getTaggedElements('bottom', 'data-iframe-height');\n    }\n  },\n      getWidth = {\n    bodyScroll: function getBodyScrollWidth() {\n      return document.body.scrollWidth;\n    },\n    bodyOffset: function getBodyOffsetWidth() {\n      return document.body.offsetWidth;\n    },\n    custom: function getCustomWidth() {\n      return customCalcMethods.width();\n    },\n    documentElementScroll: function getDEScrollWidth() {\n      return document.documentElement.scrollWidth;\n    },\n    documentElementOffset: function getDEOffsetWidth() {\n      return document.documentElement.offsetWidth;\n    },\n    scroll: function getMaxWidth() {\n      return Math.max(getWidth.bodyScroll(), getWidth.documentElementScroll());\n    },\n    max: function getMaxWidth() {\n      return Math.max.apply(null, getAllMeasurements(getWidth));\n    },\n    min: function getMinWidth() {\n      return Math.min.apply(null, getAllMeasurements(getWidth));\n    },\n    rightMostElement: function rightMostElement() {\n      return getMaxElement('right', getAllElements());\n    },\n    taggedElement: function getTaggedElementsWidth() {\n      return getTaggedElements('right', 'data-iframe-width');\n    }\n  };\n\n  function sizeIFrame(triggerEvent, triggerEventDesc, customHeight, customWidth) {\n    function resizeIFrame() {\n      height = currentHeight;\n      width = currentWidth;\n      sendMsg(height, width, triggerEvent);\n    }\n\n    function isSizeChangeDetected() {\n      function checkTolarance(a, b) {\n        var retVal = Math.abs(a - b) <= tolerance;\n        return !retVal;\n      }\n\n      currentHeight = undefined !== customHeight ? customHeight : getHeight[heightCalcMode]();\n      currentWidth = undefined !== customWidth ? customWidth : getWidth[widthCalcMode]();\n      return checkTolarance(height, currentHeight) || calculateWidth && checkTolarance(width, currentWidth);\n    }\n\n    function isForceResizableEvent() {\n      return !(triggerEvent in {\n        init: 1,\n        interval: 1,\n        size: 1\n      });\n    }\n\n    function isForceResizableCalcMode() {\n      return heightCalcMode in resetRequiredMethods || calculateWidth && widthCalcMode in resetRequiredMethods;\n    }\n\n    function logIgnored() {\n      log('No change in size detected');\n    }\n\n    function checkDownSizing() {\n      if (isForceResizableEvent() && isForceResizableCalcMode()) {\n        resetIFrame(triggerEventDesc);\n      } else if (!(triggerEvent in {\n        interval: 1\n      })) {\n        logIgnored();\n      }\n    }\n\n    var currentHeight, currentWidth;\n\n    if (isSizeChangeDetected() || 'init' === triggerEvent) {\n      lockTrigger();\n      resizeIFrame();\n    } else {\n      checkDownSizing();\n    }\n  }\n\n  var sizeIFrameThrottled = throttle(sizeIFrame);\n\n  function sendSize(triggerEvent, triggerEventDesc, customHeight, customWidth) {\n    function recordTrigger() {\n      if (!(triggerEvent in {\n        reset: 1,\n        resetPage: 1,\n        init: 1\n      })) {\n        log('Trigger event: ' + triggerEventDesc);\n      }\n    }\n\n    function isDoubleFiredEvent() {\n      return triggerLocked && triggerEvent in doubleEventList;\n    }\n\n    if (!isDoubleFiredEvent()) {\n      recordTrigger();\n\n      if (triggerEvent === 'init') {\n        sizeIFrame(triggerEvent, triggerEventDesc, customHeight, customWidth);\n      } else {\n        sizeIFrameThrottled(triggerEvent, triggerEventDesc, customHeight, customWidth);\n      }\n    } else {\n      log('Trigger event cancelled: ' + triggerEvent);\n    }\n  }\n\n  function lockTrigger() {\n    if (!triggerLocked) {\n      triggerLocked = true;\n      log('Trigger event lock on');\n    }\n\n    clearTimeout(triggerLockedTimer);\n    triggerLockedTimer = setTimeout(function () {\n      triggerLocked = false;\n      log('Trigger event lock off');\n      log('--');\n    }, eventCancelTimer);\n  }\n\n  function triggerReset(triggerEvent) {\n    height = getHeight[heightCalcMode]();\n    width = getWidth[widthCalcMode]();\n    sendMsg(height, width, triggerEvent);\n  }\n\n  function resetIFrame(triggerEventDesc) {\n    var hcm = heightCalcMode;\n    heightCalcMode = heightCalcModeDefault;\n    log('Reset trigger event: ' + triggerEventDesc);\n    lockTrigger();\n    triggerReset('reset');\n    heightCalcMode = hcm;\n  }\n\n  function sendMsg(height, width, triggerEvent, msg, targetOrigin) {\n    function setTargetOrigin() {\n      if (undefined === targetOrigin) {\n        targetOrigin = targetOriginDefault;\n      } else {\n        log('Message targetOrigin: ' + targetOrigin);\n      }\n    }\n\n    function sendToParent() {\n      var size = height + ':' + width,\n          message = myID + ':' + size + ':' + triggerEvent + (undefined !== msg ? ':' + msg : '');\n      log('Sending message to host page (' + message + ')');\n      target.postMessage(msgID + message, targetOrigin);\n    }\n\n    if (true === sendPermit) {\n      setTargetOrigin();\n      sendToParent();\n    }\n  }\n\n  function receiver(event) {\n    var processRequestFromParent = {\n      init: function initFromParent() {\n        initMsg = event.data;\n        target = event.source;\n        init();\n        firstRun = false;\n        setTimeout(function () {\n          initLock = false;\n        }, eventCancelTimer);\n      },\n      reset: function resetFromParent() {\n        if (!initLock) {\n          log('Page size reset by host page');\n          triggerReset('resetPage');\n        } else {\n          log('Page reset ignored by init');\n        }\n      },\n      resize: function resizeFromParent() {\n        sendSize('resizeParent', 'Parent window requested size check');\n      },\n      moveToAnchor: function moveToAnchorF() {\n        inPageLinks.findTarget(getData());\n      },\n      inPageLink: function inPageLinkF() {\n        this.moveToAnchor();\n      },\n      //Backward compatability\n      pageInfo: function pageInfoFromParent() {\n        var msgBody = getData();\n        log('PageInfoFromParent called from parent: ' + msgBody);\n        pageInfoCallback(JSON.parse(msgBody));\n        log(' --');\n      },\n      message: function messageFromParent() {\n        var msgBody = getData();\n        log('MessageCallback called from parent: ' + msgBody);\n        messageCallback(JSON.parse(msgBody));\n        log(' --');\n      }\n    };\n\n    function isMessageForUs() {\n      return msgID === ('' + event.data).substr(0, msgIdLen); //''+ Protects against non-string messages\n    }\n\n    function getMessageType() {\n      return event.data.split(']')[1].split(':')[0];\n    }\n\n    function getData() {\n      return event.data.substr(event.data.indexOf(':') + 1);\n    }\n\n    function isMiddleTier() {\n      return !(typeof module !== 'undefined' && module.exports) && 'iFrameResize' in window || 'jQuery' in window && 'iFrameResize' in window.jQuery.prototype;\n    }\n\n    function isInitMsg() {\n      //Test if this message is from a child below us. This is an ugly test, however, updating\n      //the message format would break backwards compatibity.\n      return event.data.split(':')[2] in {\n        \"true\": 1,\n        \"false\": 1\n      };\n    }\n\n    function callFromParent() {\n      var messageType = getMessageType();\n\n      if (messageType in processRequestFromParent) {\n        processRequestFromParent[messageType]();\n      } else if (!isMiddleTier() && !isInitMsg()) {\n        warn('Unexpected message (' + event.data + ')');\n      }\n    }\n\n    function processMessage() {\n      if (false === firstRun) {\n        callFromParent();\n      } else if (isInitMsg()) {\n        processRequestFromParent.init();\n      } else {\n        log('Ignored message of type \"' + getMessageType() + '\". Received before initialization.');\n      }\n    }\n\n    if (isMessageForUs()) {\n      processMessage();\n    }\n  } //Normally the parent kicks things off when it detects the iFrame has loaded.\n  //If this script is async-loaded, then tell parent page to retry init.\n\n\n  function chkLateLoaded() {\n    if ('loading' !== document.readyState) {\n      window.parent.postMessage('[iFrameResizerChild]Ready', '*');\n    }\n  }\n\n  addEventListener(window, 'message', receiver);\n  addEventListener(window, 'readystatechange', chkLateLoaded);\n  chkLateLoaded();\n})();","'use strict';\n\nmodule.exports = require('./js');","'use strict';\nvar global = require('./_global');\nvar has = require('./_has');\nvar cof = require('./_cof');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar toPrimitive = require('./_to-primitive');\nvar fails = require('./_fails');\nvar gOPN = require('./_object-gopn').f;\nvar gOPD = require('./_object-gopd').f;\nvar dP = require('./_object-dp').f;\nvar $trim = require('./_string-trim').trim;\nvar NUMBER = 'Number';\nvar $Number = global[NUMBER];\nvar Base = $Number;\nvar proto = $Number.prototype;\n// Opera ~12 has broken Object#toString\nvar BROKEN_COF = cof(require('./_object-create')(proto)) == NUMBER;\nvar TRIM = 'trim' in String.prototype;\n\n// 7.1.3 ToNumber(argument)\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  if (typeof it == 'string' && it.length > 2) {\n    it = TRIM ? it.trim() : $trim(it, 3);\n    var first = it.charCodeAt(0);\n    var third, radix, maxCode;\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i\n        default: return +it;\n      }\n      for (var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++) {\n        code = digits.charCodeAt(i);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\nif (!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')) {\n  $Number = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var that = this;\n    return that instanceof $Number\n      // check on 1..constructor(foo) case\n      && (BROKEN_COF ? fails(function () { proto.valueOf.call(that); }) : cof(that) != NUMBER)\n        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);\n  };\n  for (var keys = require('./_descriptors') ? gOPN(Base) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES6 (in case, if modules with ES6 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(Base, key = keys[j]) && !has($Number, key)) {\n      dP($Number, key, gOPD(Base, key));\n    }\n  }\n  $Number.prototype = proto;\n  proto.constructor = $Number;\n  require('./_redefine')(global, NUMBER, $Number);\n}\n","import React from \"react\"\nimport { Link, graphql } from \"gatsby\"\n\nimport SEO from \"../components/seo.js\"\n\nimport Remarkbox from 'react-remarkbox';\n\nimport '../styles/skeleton.min.css'\nimport '../styles/home.css'\n\nimport 'katex/dist/katex.min.css'\n\nclass BlogPostTemplate extends React.Component {\n  render() {\n    const post = this.props.data.markdownRemark\n    const slug = this.props.path;\n    // const { previous, next } = this.props.pageContext\n    return (\n      <div>\n        <SEO\n          title={post.frontmatter.title}\n          description={post.frontmatter.description || post.excerpt}\n        />\n        <div className=\"container\">\n          <div className=\"row medium-separation\">\n            <div className=\"twelve columns\">\n              <h2 className=\"profile-heading\">David's Musings</h2>\n              <Link to=\"/blog\"> View more posts</Link>\n              <hr/>\n            </div>\n          </div>\n          <div className=\"row small-separation\">\n            <div className=\"twelve columns\">\n              <article>\n                <header>\n                  <div className=\"row\">\n                    <div className=\"six columns\">\n                      <h3>\n                        {post.frontmatter.title}\n                      </h3>\n                    </div>\n                    <div className=\"six columns\">\n                      <p className=\"grey right-on-large\">\n                        {post.frontmatter.date}\n                      </p>\n                    </div>\n                  </div>\n                </header>\n                <section dangerouslySetInnerHTML={{ __html: post.html }} />\n              </article>\n            </div>\n          </div>\n          <div className=\"row small-separation\">\n            <div className=\"twelve columns\">\n              <Remarkbox\n                remarkboxKey={'c6fc9353-1776-11ea-8c00-040140774501'}\n                threadUri={`http://dmhacker.github.io${slug}`}\n                threadTitle={post.frontmatter.title}\n                className=\"full-width\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default BlogPostTemplate\n\nexport const pageQuery = graphql`\n  query BlogPostBySlug($slug: String!) {\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      id\n      excerpt(pruneLength: 160)\n      html\n      frontmatter {\n        title\n        date(formatString: \"MMMM DD, YYYY\")\n        description\n      }\n    }\n  }\n`\n","exports.iframeResizer = require('./iframeResizer');\nexports.iframeResizerContentWindow = require('./iframeResizer.contentWindow');"],"sourceRoot":""}